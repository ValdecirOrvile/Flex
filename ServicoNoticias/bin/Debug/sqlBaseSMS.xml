<?xml version="1.0" encoding="utf-8" ?>
<CONXOESBASEHISTORICA>
  <!-- Define as conexões com a base historica, montar um nodo <CONEXAO> para cada base histórica colocando o tenant -->
  <CONEXOES>
    <CONEXAO>
      <!-- Tenant do banco  -->
      <TENANT>default</TENANT>
      <!-- Conexão ODBC com o banco  -->
      <ODBC>BaseSMS</ODBC>
      <!-- Usuário  -->
      <USUARIO>root</USUARIO>
      <!-- Senha  -->
      <SENHA>root</SENHA>
    </CONEXAO>
  </CONEXOES>
  <!-- Consultas com formato comum aos bancos com base historica -->
  <CONSULTAS>
    <!-- Ativar para base históricas MySql\Postgress\SqlServer e Oracle  -->
    <!-- Ativar para base históricas MySql\Postgress\SqlServer e Oracle  -->
    <CONSULTAQUALIFICACOES>SELECT CODE, NAME FROM AGENTOUTCOMES WHERE CODE NOT IN (SELECT AG_OUTCOME FROM OUTCOMES_CAMPAIGNS WHERE ((ALTERNATE_DESCRIPTION &lt;&gt; '') AND (CAMPAIGN_NAME = '{0}' ))) UNION SELECT  AG_OUTCOME, ALTERNATE_DESCRIPTION FROM OUTCOMES_CAMPAIGNS WHERE (ALTERNATE_DESCRIPTION &lt;&gt; '') AND (CAMPAIGN_NAME = '{0}');</CONSULTAQUALIFICACOES>
    <CONSULTAQUALIFICACOESALTERNATIVAS>SELECT campaign_name, ag_outcome, description, alternate_description, present FROM outcomes_campaigns WHERE campaign_name = '{0}';</CONSULTAQUALIFICACOESALTERNATIVAS>
    <CONSULTACAMPANHASCOMQUALIFICACOESALTERNATIVAS>SELECT DISTINCT CAMPAIGN_NAME FROM outcomes_campaigns;</CONSULTACAMPANHASCOMQUALIFICACOESALTERNATIVAS>
    <CRIAQUALIFICACOESALTERNATIVAS>INSERT INTO outcomes_campaigns (AG_OUTCOME, CAMPAIGN_NAME, DESCRIPTION, ALTERNATE_DESCRIPTION, PRESENT) SELECT CODE, '{0}', NAME, '' as descricao, 1 FROM AGENTOUTCOMES;</CRIAQUALIFICACOESALTERNATIVAS>
    <CRIAQUALIFICACOESALTERNATIVASDEMODELO>INSERT INTO outcomes_campaigns (AG_OUTCOME, CAMPAIGN_NAME, DESCRIPTION, ALTERNATE_DESCRIPTION, PRESENT) SELECT  AG_OUTCOME, '{0}', DESCRIPTION, ALTERNATE_DESCRIPTION, PRESENT FROM OUTCOMES_CAMPAIGNS WHERE CAMPAIGN_NAME = '{1}'</CRIAQUALIFICACOESALTERNATIVASDEMODELO>
    <EXCLUIQUALIFICACOESALTERNATIVAS>DELETE FROM outcomes_campaigns WHERE CAMPAIGN_NAME = '{0}';</EXCLUIQUALIFICACOESALTERNATIVAS>
    <ALTERAQUALIFICACAOALTERNATIVA>UPDATE outcomes_campaigns SET present = {2}, alternate_description = '{3}' WHERE CAMPAIGN_NAME = '{0}' AND ag_outcome = {1};</ALTERAQUALIFICACAOALTERNATIVA>
    <CONSULTAQUALIFICACOESSISTEMA>SELECT CODE, NAME FROM SWITCHOUTCOMES;</CONSULTAQUALIFICACOESSISTEMA>
    <CRIAQUALIFICACAOAGENTE>INSERT INTO AGENTOUTCOMES (CODE,NAME,LIVE_OUTCOME) VALUES({0},'{1}',1);</CRIAQUALIFICACAOAGENTE>
    <ALTERAQUALIFICACAOAGENTE>UPDATE AGENTOUTCOMES SET NAME = '{1}' WHERE CODE = {0};</ALTERAQUALIFICACAOAGENTE>
    <EXCLUIRQUALIFICACAOAGENTE>DELETE FROM AGENTOUTCOMES WHERE CODE = {0};</EXCLUIRQUALIFICACAOAGENTE>
    <EXCLUIRQUALIFICACAOALTERNATIVAAGENTE>DELETE FROM OUTCOMES_CAMPAIGNS WHERE AG_OUTCOME = {0};</EXCLUIRQUALIFICACAOALTERNATIVAAGENTE>
  </CONSULTAS>
</CONXOESBASEHISTORICA>
